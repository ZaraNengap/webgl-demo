(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(t,e,i){t.exports=i.p+"static/media/test.77585d9f.png"},112:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAA6ppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wNS0wOFQxMTowNTo1MTwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjguMzwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpDb21wcmVzc2lvbj41PC90aWZmOkNvbXByZXNzaW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTA8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI1MDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoPBI6OAAAEWUlEQVR4Ae3QgQAAAADDoPlTH+SFUGHAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMGDAgAEDBgwYMPA5MNG3AAFiQnZ2AAAAAElFTkSuQmCC"},122:function(t,e,i){t.exports=i(248)},127:function(t,e,i){},134:function(t,e,i){},247:function(t,e,i){},248:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),o=i(16),s=i.n(o),r=(i(127),i(15)),h=i(30),l=n.a.createContext({width:400,height:400}),c=l;function g(t){return n.a.createElement(l.Provider,{value:{width:400,height:400}},t.children)}function m(){this._buffer=null,this.cols=null,this.rows=null,this.cols_m1=null,this.rows_m1=null,this.width=null,this.height=null,this.nTotal=null,this.nTotalx2=null,this.outX=null,this.outY=null,this.fieldPosX=null,this.fieldPosY=null,this.mPos=null}function u(){this.flg=!1,this.angle=0,this.scale=0,this.int=0,this.velX=0,this.posX=0,this.velY=0,this.posY=0,this.life=0,this.damping=.1,this.r=0,this.g=0,this.b=0}d.prototype.changeColor=function(t){this.isEraser=!1,this.mActiveColor=t},d.prototype.changeWidth=function(t){return this.penWidth=t,this.penWidth},m.prototype.setupField=function(t,e,i,a){this.cols=t,this.rows=e,this.cols_m1=this.cols-1,this.rows_m1=this.rows-1,this.width=i,this.height=a,this.nTotal=this.cols*this.rows,this.nTotalx2=2*this.nTotal,this.dispose(),this._buffer=new Array;for(var n=0;n<this.nTotalx2;n++)this._buffer.push(0)},m.prototype.dispose=function(){this._buffer=null},m.prototype.clear=function(){for(var t=0;t<this.nTotalx2;t++)this._buffer[t]=0},m.prototype.getForceFromPos=function(t,e){t/=this.width,e/=this.height,t<0||t>1||e<0||e>1?(this.outX=0,this.outY=0):(this.fieldPosX=t*this.cols,this.fieldPosY=e*this.rows,this.mPos=2*Math.trunc(this.fieldPosY*this.cols+this.fieldPosX),this.outX=.1*this._buffer[this.mPos],this.outY=.1*this._buffer[this.mPos+1])},m.prototype.addVectorCircle=function(t,e,i,a,n,o){var s=a>>16&255,r=a>>8&255,h=a>>0&255,l=t.ctx;l.strokeStyle="rgba(".concat(s,", ").concat(r,", ").concat(h,", 1)"),l.lineCap="round",l.lineWidth=40,l.beginPath(),l.moveTo(e,i),l.lineTo(n,o),l.stroke()},m.prototype.fadeField=function(t){for(var e=0;e<this.nTotalx2;e++){var i=Math.trunc(e);this._buffer[i]*=t}},u.prototype.setInitialCondition=function(t,e,i,a,n){this.posX=t,this.posY=e,this.velX=i,this.velY=a,this.life=n},u.prototype.setVFupdate=function(t,e){this.velX=this.velX+(t-this.velX*this.damping),this.velY=this.velY+(e-this.velY*this.damping),this.posX=this.posX+this.velX,this.posY=this.posY+this.velY,this.life=this.life-1};function A(){}A.prototype.easeOutQuart=function(t,e,i,a){return-i*((t=t/a-1)*t*t*t-1)+e},A.prototype.easeInOutQuart=function(t,e,i,a){return(t/=a/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e};new A;function d(){this.penWidth=50}d.prototype.init=function(t,e,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=i,this.mParticles=[],this.mVF=new m,this.isEraser=!1,this.mVF.setupField(e/30,i/30,e,i),this.moveFlag=!1,this.isZoom=!1,this._toScale=0,this._frScale=null,this._ticktime=null,this._zoomTryed=!1,this._drawingEnabled=!0,this.currentScale=1.16,this.mColorRandRange=1,this.mActiveColor=13209,this._eraseMode=!1,this.mFudeSize=1.2,this.mUniformMatrix=new Array(4),this.mUniformColor=new Array(4),this.canvas.addEventListener("touchstart",this.startEvent.bind(this),!1),this.canvas.addEventListener("mousedown",this.startEvent.bind(this),!1),this.canvas.addEventListener("touchmove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("mousemove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("touchend",this.endEvent.bind(this),!1),this.canvas.addEventListener("mouseup",this.endEvent.bind(this),!1),this.textureParticle=[],this.animloop()},d.prototype.animloop=function(){window.requestAnimFrame(this.animloop.bind(this)),this.onEnterFrame()},d.prototype.getXY=function(t){var e=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY;return{x:e-this.canvas.offsetLeft+(document.body.scrollLeft||document.documentElement.scrollLeft),y:i-this.canvas.offsetTop+(document.body.scrollTop||document.documentElement.scrollTop)}},d.prototype.startEvent=function(t){t.preventDefault(),t.stopPropagation();var e=this.getXY(t);this.mPrevMouseX=e.x,this.mPrevMouseY=e.y,this.mPrevDiffX=0,this.mPrevDiffY=0,this.moveFlag=!0};d.prototype.moveEvent=function(t){if(t.preventDefault(),t.stopPropagation(),this.moveFlag){var e=this.getXY(t),i=e.x,a=e.y;if(this.isEraser)this.resetEraser(i,a);else{for(var n=i-this.mPrevMouseX,o=a-this.mPrevMouseY,s=Math.max(Math.sqrt(n*n+o*o)/30,1),r=0;r<s;r++){var h=(r+1)/s,l=i-this.mPrevMouseX,c=a-this.mPrevMouseY;l*=h,c*=h,l=this.mPrevMouseX+l,c=this.mPrevMouseY+c;var g=n-this.mPrevDiffX,m=o-this.mPrevDiffY;g*=h,m*=h,g=this.mPrevDiffX+g,m=this.mPrevDiffY+m;var A=.2+Math.min(this.mFudeSize,Math.sqrt(g*g+m*m)/50);this.mVF.addVectorCircle(this,this.mPrevMouseX,this.mPrevMouseY,this.mActiveColor,l,c);for(var d=0;d<10;d++){var D=this._eraseMode?1e3:1e3*Math.random(),f=new u;f.angle=720*Math.random(),f.flg=!1;var v=void 0;if(Math.random()<.1){var w=255*(Math.random()*this.mColorRandRange-.5*this.mColorRandRange),p=(this.mActiveColor>>16&255)+w,E=(this.mActiveColor>>8&255)+w,M=(this.mActiveColor>>0&255)+w;v=(p=p<0?0:p>255?255:p)<<16|(E=E<0?0:E>255?255:E)<<8|(M=M<0?0:M>255?255:M)}else v=this.mActiveColor;f.r=v>>16&255,f.g=v>>8&255,f.b=v>>0&255;var Y=100*Math.random()-50,G=100*Math.random()-50,b=Math.sqrt(Y*Y+G*G);Y/=b,G/=b;var B=50*Math.random()-25;if(Y*=B,G*=B,D<10)Math.random()<.1?f.scale=6*Math.random():f.scale=3*Math.random(),f.setInitialCondition(l+100*Math.random()-50,c+100*Math.random()-50,0,0,0),f.texIndex=6*Math.random();else if(D<30){Math.random()<.1?(f.scale=4*Math.random(),f.texIndex=1):(f.scale=.5*Math.random()+1,f.texIndex=6*Math.random());var C=.7*Math.random()+.3;f.setInitialCondition(l+g*C*15,c+m*C*15,0,0,0)}else if(D<50){var I=.7*Math.random()+.3;f.scale=.5*Math.random()+1,f.setInitialCondition(l+Y,c+G,g*I,m*I,30*Math.pow(A,.7)),f.texIndex=0,f.flg=!0}else f.setInitialCondition(l+Y,c+G,.2*g,.2*m,30),f.texIndex=Math.random()<.2?1:0,f.scale=.3*Math.random()+1.2;if(f.scale*=1.2,f.scale*=50*A,this.mParticles.push(f),this.mParticles.length>500){var x=250*Math.random();this.mParticles.splice(x,1)}}}this.mPrevDiffX=n,this.mPrevDiffY=o,this.mPrevMouseX=i,this.mPrevMouseY=a}}},d.prototype.endEvent=function(t){t.preventDefault(),t.stopPropagation(),this.moveFlag=!1},d.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},d.prototype.onEnterFrame=function(){if(this._drawingEnabled&&this.draw(),this.isZoom?1!=this._toScale&&(this._toScale=1,this._frScale=this.currentScale,this._ticktime=(new Date).getTime()):0!=this._toScale&&(this._toScale=0,this._frScale=this.currentScale,this._ticktime=(new Date).getTime()),this.currentScale!=this._toScale&&this._drawingEnabled){var t=((new Date).getTime()-this.__ticktime)/1e3*.3;t>1&&(t=1,this.currentScale=this._toScale)}},d.prototype.getZoomRectMotion=function(){},d.prototype.draw=function(){var t=this.mParticles.length;if(t>0){this.__eraseMode;for(var e=0;e<t;){var i=this.mParticles[e];i.flg&&Math.random()>.5||(i.flg?(this.mUniformMatrix[0]=i.posX+(1*Math.random()-.5)*i.scale*.06,this.mUniformMatrix[1]=i.posY+(1*Math.random()-.5)*i.scale*.06,this.mUniformMatrix[3]=i.scale*(.4*Math.random()+.8),this.mUniformColor[3]=Math.random(),this.mUniformColor[0]=i.r*this.mUniformColor[3],this.mUniformColor[1]=i.g*this.mUniformColor[3],this.mUniformColor[2]=i.b*this.mUniformColor[3]):(this.mUniformMatrix[0]=i.posX,this.mUniformMatrix[1]=i.posY,this.mUniformMatrix[3]=i.scale,this.mUniformColor[0]=i.r,this.mUniformColor[1]=i.g,this.mUniformColor[2]=i.b,this.mUniformColor[3]=1),this.mUniformMatrix[2]=i.angle,this.drawTriangles(this.mUniformMatrix,this.mUniformColor)),i.life>0?(this.mVF.getForceFromPos(i.posX,i.posY),i.setVFupdate(this.mVF.outX,this.mVF.outY),e++):(this.mParticles.splice(e,1),--t)}this.mUniformColor[3]=1}this.mVF.fadeField(.96)},d.prototype.drawTriangles=function(t,e){this.ctx.fillStyle="rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")"),this.ctx.beginPath(),this.ctx.arc(t[0],t[1],t[3]/40,0,2*Math.PI),this.ctx.fill()},d.prototype.resetEraser=function(t,e){this.ctx.globalCompositeOperation="source-over",this.ctx.beginPath(),this.ctx.arc(t,e,30,0,2*Math.PI),this.ctx.fillStyle="rgba(255,255,255,1)",this.ctx.fill(),this.ctx.globalCompositeOperation="source-over"},d.prototype.openEraser=function(){this.isEraser=!0},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var D=d;function f(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){var e=t.current,a=new D;e&&a.init(e,i,o)},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}function v(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){t.current},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}function w(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){t.current},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}i(128);var p=i(44),E=(i(130),i(45)),M=i(107),Y=i(108),G=i(109),b=i(119),B=i(110),C=i(120),I=(i(249),i(62)),x=(i(134),i(111)),y=i.n(x),P=i(112),X=i.n(P),R=I.a.Item,j=function(t){function e(t){var i;return Object(Y.a)(this,e),(i=Object(b.a)(this,Object(B.a)(e).call(this,t))).saveRef=function(t){t&&(i.canvas=t,i.width=t.width,i.height=t.height)},i.getRndInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},i.reset=function(){i.animateId&&(window.cancelAnimationFrame(i.animateId),i.animateId=null),i.concussionId&&(window.cancelAnimationFrame(i.concussionId),i.concussionId=null),i.animateTimeoutId&&(clearTimeout(i.animateTimeoutId),i.animateTimeoutId=null),i.pausing=!1;var t=i.canvas.getContext("2d");t.restore(),t.clearRect(0,0,i.width,i.height),t.drawImage(i.img,0,0,i.width,i.height)},i.pause=function(){i.pausing=!i.pausing},i.random=function(){i.props.form.setFieldsValue(i.getRandomObject()),i.start()},i.getRandomObject=function(){return{deg:i.getRndInteger(1,179),size:i.getRndInteger(5,20),offset:50,glitch:i.getRndInteger(120,130)}},i.animate=function(t,e,a,n,o,s){var r,h=Date.now(),l=h+30,c=n-a;!function n(g){if(!i.pausing){r=g?Date.now():h;var m=a+c*(r>l?30:r-h)/30;if(i.drawGlitch(t,e,m,o),r>l)return void s()}i.animateId=window.requestAnimFrame(n)}()},i.start=function(){i.reset();var t=i.props.form.getFieldsValue(),e=t.offset,a=t.deg,n=t.size,o=t.glitch,s=e,r=0;!function t(){s>0?r=1-s:s<0&&(r=-1-s),i.animate(a,n,s,r,o,function(){i.concussionId=window.requestAnimFrame(t)}),0!==Number(r.toFixed(5))?s=r:i.reset()}()},i.drawGlitch=function(t,e,a,n){t<45?i.drawXGlitch(t,e,a,n):t<90?i.drawYGlitch(t,e,a,n):t<135?i.drawLargeYGlitch(t,e,a,n):i.drawLargeXGlitch(t,e,a,n)},i.state={},i.width=250,i.height=250,i.intervals=[],i}return Object(C.a)(e,t),Object(G.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.img=new Image,this.img.src=y.a,this.transparentImg=new Image,this.transparentImg.src=X.a,this.img.onload=function(){t.reset()}}},{key:"translateImage",value:function(t,e,i){t.clearRect(0,0,this.width,this.height),t.drawImage(this.img,e,i,this.width,this.height),t.restore()}},{key:"drawXGlitch",value:function(t,e,i,a){var n=this.canvas.getContext("2d"),o=Math.tan(Math.PI*t/180),s=o*this.width;n.save(),n.beginPath(),n.moveTo(0,a),n.lineTo(this.width,a-s),n.lineTo(this.width,a-s+e),n.lineTo(0,a+e),n.closePath(),n.clip(),this.translateImage(n,i,-o*i)}},{key:"drawYGlitch",value:function(t,e,i,a){var n=this.canvas.getContext("2d"),o=Math.tan(Math.PI*t/180),s=this.height/o;n.save(),n.beginPath(),n.moveTo(a,0),n.lineTo(a-s,this.height),n.lineTo(a-s+e,this.height),n.lineTo(a+e,0),n.closePath(),n.clip(),this.translateImage(n,-i/o,i)}},{key:"drawLargeYGlitch",value:function(t,e,i,a){var n=this.canvas.getContext("2d"),o=Math.tan(Math.PI*(180-t)/180),s=this.height/o;n.save(),n.beginPath(),n.moveTo(a,0),n.lineTo(a+s,this.height),n.lineTo(a+s+e,this.height),n.lineTo(a+e,0),n.closePath(),n.clip(),this.translateImage(n,i/o,i)}},{key:"drawLargeXGlitch",value:function(t,e,i,a){var n=this.canvas.getContext("2d"),o=Math.tan(Math.PI*(180-t)/180),s=o*this.width;n.save(),n.beginPath(),n.moveTo(0,a),n.lineTo(this.width,a+s),n.lineTo(this.width,a+s+e),n.lineTo(0,a+e),n.closePath(),n.clip(),this.translateImage(n,i,o*i)}},{key:"render",value:function(){Object(M.a)(this.state);var t=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"filter"},n.a.createElement("div",{className:"filter-t-shirt"},n.a.createElement("canvas",{width:this.width,height:this.height,className:"filter-canvas",ref:this.saveRef})),n.a.createElement("div",{className:"operation-area"},n.a.createElement(E.a,{onClick:this.random,type:"primary"},"\u968f\u673a"),"\xa0\xa0",n.a.createElement(E.a,{onClick:this.start,type:"primary"},"\u5272\u88c2"),"\xa0\xa0",n.a.createElement(E.a,{onClick:this.pause,type:"primary"},"\u6682\u505c"),"\xa0\xa0",n.a.createElement(E.a,{onClick:this.reset},"\u91cd\u7f6e"),n.a.createElement(I.a,null,n.a.createElement(R,{label:"\u5272\u88c2\u89d2\u5ea6"},t("deg",{initialValue:30})(n.a.createElement(p.a,null))),n.a.createElement(R,{label:"\u5272\u88c2\u5927\u5c0f"},t("size",{initialValue:10})(n.a.createElement(p.a,null))),n.a.createElement(R,{label:"\u5272\u88c2\u504f\u79fb\u91cf"},t("offset",{initialValue:100})(n.a.createElement(p.a,null))),n.a.createElement(R,{label:"\u5272\u88c2\u4f4d\u7f6e"},t("glitch",{initialValue:200})(n.a.createElement(p.a,null))))))}}]),e}(a.Component),_=I.a.create()(j);function O(t,e,i,a,n,o){this.a=t,this.b=e,this.c=i,this.d=a,this.tx=n,this.ty=o}O.prototype.translate=function(t,e){this.tx=t,this.ty=e},O.prototype.concat=function(t){var e=this.a,i=this.c,a=this.tx;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=a*t.a+this.ty*t.c+t.tx,this.ty=a*t.b+this.ty*t.d+t.ty},O.prototype.scale=function(t,e){var i=new O(t,0,0,e,0,0);this.concat(i)},O.prototype.identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};function L(t,e,i,a){this._rect=null,this.imageData=null,this.image=null,this.bitmapBytes=null,this.checkTable=null,this.isLoaded=!1,this.width=t,this.height=e,this.transparent=i,this.fillColor=a;var n=t*e;if(n>0){var o=document.createElement("canvas");o.width=t,o.height=e;var s=o.getContext("2d");this.imageData=s.createImageData(t,e),i&&0==a&&(n=0);for(var r=0;r<n;r++){var h=4*r;this.imageData.data[h+0]=a>>16&255,this.imageData.data[h+1]=a>>8&255,this.imageData.data[h+2]=a>>0&255,this.imageData.data[h+3]=i?a>>24&255:255}s.putImageData(this.imageData,0,0),this.image=o}}L.prototype.draw=function(t,e,i,a,n,o){var s=t;s&&this.image&&(s.image&&this.image.getContext("2d").drawImage(s.image,0,0,s.image.width*e.a,s.image.height*e.d))},L.prototype.lock=function(){},L.prototype.unlock=function(){},L.prototype.getPixel32=function(t,e){return this.bitmapBytes.position=4*(t+e*this.width),this.bitmapBytes.readUnsignedInt()};function F(t,e){t(e)}function T(t){this.scale=1,this.position=0,this._mipmaps=[],this._LODLevel=[],this._martigX=null,this.mUniformColor=[],this.margin=7,this.InMargin=256/252,this._lodSum=0,this.maxCellLod=null,this._bUpdated=null,this._lod1Count=0,this.updatePointsX=[],this.updatePointsY=[],this.updatePointsLod=[],this._mosicRemderSize=47.8,this._martigX=0,this._martigY=0}T.prototype.init=function(t,e,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=i;var a=this,n=new Image;n.src="pic1.png",n.onload=function(){a.ctx.drawImage(n,10,10,380,390);var t=a.ctx.getImageData(0,0,400,400);a.generateMipmapWithBitmap(t,400,400)},this._LODLevel=new Array(16e4).fill(1),this.maxCellLod=16e4*(this._mipmaps.length-1-2),this.canvas.addEventListener("mousedown",this.startEvent.bind(this),!1)},T.prototype.generateMipmapWithBitmap=function(t,e,i){var a=this.ctx.getImageData(0,0,e,i),n=a.data,o=this.ctx.getImageData(0,0,e,i),s=o.data;console.log(o);for(var r=0;r<i;r+=4)for(var h=0;h<e;h+=4){for(var l=0,c=0,g=0,m=0;m<4;m++)for(var u=0;u<4;u++){l+=s[4*(A=(r+m)*e+(h+u))+0],c+=s[4*A+1],g+=s[4*A+2]}var A=r*e+h,d=l/16,D=c/16,f=g/16;for(m=0;m<4;m++)for(u=0;u<4;u++){n[4*(A=(r+m)*e+(h+u))+0]=d,n[4*A+1]=D,n[4*A+2]=f}}this.ctx.putImageData(a,0,0,0,0,e,i)},T.prototype.getXY=function(t){var e=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY;return{x:e-this.canvas.offsetLeft+(document.body.scrollLeft||document.documentElement.scrollLeft),y:i-this.canvas.offsetTop+(document.body.scrollTop||document.documentElement.scrollTop)}},T.prototype.startEvent=function(t){t.preventDefault(),t.stopPropagation();var e=this.getXY(t);this.addedForce(e.x,e.y),this.draw()},T.prototype.draw=function(){var t=this,e=this.ctx.getImageData(0,0,400,400),i=e.data,a=this.ctx.getImageData(0,0,400,400),n=a.data;console.log(a);var o=4*this.scale,s=o*o;this.updatePointsX.forEach(function(e,a){var r=t.updatePointsX[a],h=t.updatePointsY[a];for(a=0;a<400;a+=1)for(var l=0;l<400;l+=1)if(a===r&&l===h){for(var c=0,g=0,m=0,u=0;u<o;u++)for(var A=0;A<o;A++){c+=n[4*(d=400*(r=a+u)+(h=l+A))+0],g+=n[4*d+1],m+=n[4*d+2]}var d=400*a+l,D=c/s,f=g/s,v=m/s;for(u=0;u<o;u++)for(A=0;A<o;A++){i[4*(d=400*(r=a+u)+(h=l+A))+0]=D,i[4*d+1]=f,i[4*d+2]=v}}}),this.ctx.putImageData(e,0,0,0,0,400,400)},T.prototype.addedForce=function(t,e){this.scale=this.scale+1,this._bUpdated=!0;var i,a,n,o,s,r,h,l,c,g,m,u,A=this._lodSum/this.maxCellLod,d=8*(1-A);if(!(d<5&&Math.random()>1*(d/5*.5+.05)))for(var D=0;D<1*d;D++){if(1==A)return;f(this)}function f(t){i=Math.floor(400*Math.random()),a=Math.floor(400*Math.random()),v(t)}function v(t){if(t.position=i+400*a,t.position<t._LODLevel.length){var e=t._LODLevel[t.position];t.position++}var D;D=e+1;var w=Math.pow(2,D-1);i=Math.floor(i/w)*w;for(var p=!0,E=a=Math.floor(a/w)*w;E<a+w;E++){if(E<400){t.position=i+400*E;for(var M=i;M<i+w&&M<400;M++)if(t._LODLevel[t.position]!=e)return i=M,a=E,void F(v,t)}else p=!1;if(!p)break}if(p){if(e==t._mipmaps.length-3&&d<5){if(!(Math.random()<Math.pow(1-d/5,2)))return void F(f,t);if(t._lod1Count<t.maxCellNum)return void(Math.random()<.6&&F(f,t))}if(e!=t._mipmaps.length-2)if(2!=e){p=!1,w=Math.pow(2,D-1);for(var Y=Math.pow(2,e-1),G=a;G<a+w&&G<400;G++)for(var b=i;b<i+w&&b<400;b++)b%Y==0&&G%Y==0&&(u=t.ctx.getImageData(b/Y,G/Y,1,1).data,c=u[0],g=u[1],m=u[2],p?(n>c&&(n=c),r<c&&(r=c),o>g&&(o=g),h<g&&(h=g),s>m&&(s=m),l<m&&(l=m)):(p=!0,n=r=c,o=h=g,s=l=m));c=r-n,g=h-o,m=l-s;var B=Math.sqrt(c*c+g*g+m*m)/(500*A);if(B>.92&&(B=.92),B=Math.pow(B,2),Math.random()<B)F(f,t);else{for(var C=a;C<a+w&&C<400;C++){t.position=i+400*C;for(var I=i;I<i+w&&I<400;I++)t._LODLevel[t.position]=D,t._lodSum++,2==D&&t._lod1Count++}t.updatePointsX.push(i),t.updatePointsY.push(a),t.updatePointsLod.push(D)}}else F(f,t);else F(f,t)}else F(f,t)}};var U=T;function W(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){var e=t.current,a=new U;e&&a.init(e,i,o)},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}function Z(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){t.current},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}function S(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){t.current},[t,i,o]),n.a.createElement("canvas",{ref:t,width:i,height:o})}var k=i(32);function N(){var t=Object(a.useRef)(),e=Object(a.useContext)(c),i=e.width,o=e.height;return Object(a.useEffect)(function(){var e=t.current;if(e){var a=new k.d(70,i/o,.01,10);a.position.z=1;var n=new k.e,s=new k.a(.2,.2,.2),r=new k.c,h=new k.b(s,r);n.add(h);var l=new k.f({antialias:!0});l.setSize(i,o),e.appendChild(l.domElement),function t(){requestAnimationFrame(t),h.rotation.x+=.01,h.rotation.y+=.02,l.render(n,a)}()}},[t,i,o]),n.a.createElement("div",{ref:t,style:{width:i,height:o}})}function V(){return n.a.createElement(g,null,n.a.createElement(h.c,null,n.a.createElement(h.a,{exact:!0,path:"/"},n.a.createElement("h1",null,"WebGL Demo")),n.a.createElement(h.a,{exact:!0,path:"/paint",component:f}),n.a.createElement(h.a,{exact:!0,path:"/moma01",component:v}),n.a.createElement(h.a,{exact:!0,path:"/moma02",component:w}),n.a.createElement(h.a,{exact:!0,path:"/mosaic",component:W}),n.a.createElement(h.a,{exact:!0,path:"/glich",component:_}),n.a.createElement(h.a,{exact:!0,path:"/splash",component:Z}),n.a.createElement(h.a,{exact:!0,path:"/layout",component:S}),n.a.createElement(h.a,{exact:!0,path:"/three",component:N})))}i(247);var z=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(r.a,null,n.a.createElement("ul",{className:"navbar"},n.a.createElement("li",null,n.a.createElement(r.b,{exact:!0,activeClassName:"active",to:"/"},"Home")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/paint"},"Paint Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/moma01"},"Moma01 Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/moma02"},"Moma02 Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/glich"},"Glich Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/mosaic"},"Mosaic Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/splash"},"Splash Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/layout"},"Layout Demo")),n.a.createElement("li",null,n.a.createElement(r.b,{activeClassName:"active",to:"/three"},"Three-js Demo"))),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"demo"},n.a.createElement(V,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[122,1,2]]]);
//# sourceMappingURL=main.d4e333b1.chunk.js.map